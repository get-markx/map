(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();let a="https://admin.workadventu.re";function c(){const t=WA.player.userRoomToken;if(t===void 0)throw new Error("No userRoomToken found. The quests plugin can only work with WorkAdventure SAAS edition (at https://play.workadventu.re).");return t}async function u(t){const r=new URL(`/api/quests/${t}`,a);r.search=new URLSearchParams({room:WA.room.id}).toString();const n=await fetch(r,{method:"GET",headers:{Authorization:c()}});if(!n.ok)throw new Error(`An error occurred. HTTP Code: ${n.status} ${n.statusText}.`);return await n.json()}async function l(t,r){if(!WA.player.isLogged)throw new Error("You must be logged to gain XP.");const n=new URL(`/api/quests/${t}/level-up`,a),s=await fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:c()},body:JSON.stringify({xp:r})});if(!s.ok)throw new Error(`An error occurred. HTTP Code: ${s.status} ${s.statusText}.`);const e=await s.json();return e.awardedBadges.length>0&&(async()=>{for(const o of e.awardedBadges)await d(t,o)})().catch(o=>{console.error(o)}),e}async function d(t,r){const n=new URL(`/quests/${t}/badge/${r}/congratulations`,a);n.search=new URLSearchParams({token:c()}).toString(),await WA.ui.website.open({url:n.toString(),position:{vertical:"middle",horizontal:"middle"},allowApi:!0,visible:!0,size:{width:"100%",height:"100%"}})}(async()=>{await WA.onInit(),console.log("Current player name: ",WA.player.name),console.log("Assign 10 xp once"),l("TIME_SPENT_IN_THE_GAME",10).catch(r=>console.error(r));const t=u("TIME_SPENT_IN_THE_GAME");console.log(t)})();
//# sourceMappingURL=testpage-1dd6bde1.js.map
